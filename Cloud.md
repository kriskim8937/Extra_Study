## Docker
## Container
- 호스트 os 상에 논리적인 구획(컨테이너)를 만들고, 애플리케이션을 실행시키는데 필요한 라이브러리나 애플리케이션 등을 하나로 모아 그것을 마치 전용 서버인 것처럼 사용할 수 있게 만든것   
- 호스트 os의 리소스를 논리적으로 분리하여 여러 컨테이너가 공유한다.
- 컨테이너는 서버 가상화와 비교하여 오버헤드가 적기 때문에 가볍고 속도가 빠르다.
- 일반적으로 물리 서버상에 설치한 호스트 os의 경우 하나의 os 상에서 움직이는 여러 어플리케이션은 동일한 시스템 리소스를사용한다.
- 이때 움직이는ㄴ 어플리케이션들은 데이터를 저장하는 디렉토리를 공유하고, 서버에 설정된 동일한 ip주소로 통신을 한다.
- 여러 어플리케이션에서 사용하고 있는 미들웨어나 라이브러리의 버전이 다르다면 어플리케이션이 서로 영향을 받지 않도록 주의해야 합니다.
- 이에 반해 컨테이너 기술을 사용하면 os나 디렉토리, ip주소와 같은 시스템 리소스를 각 애플리케이션이 점유하는 것처럼 취급할수 있다!!
- 컨테이너 기술에는 여러가지가 있지만 현재의 default는 도커이다
- 도커는 애플리케이션의 실행에 필요한 환경을 하나의 이미지로 모으고, 그이미지로 다양한 환경에서 애플리케이션 실행 환경을 구축/ 운용하기 위한 오픈소스이다.
- 개발한 애플리케이션의 실행에 필요한 모든 것이 포함되어 있는 컨테이너 이미지를 작성한다. 이 이미지는 os커널과 호환성이 있어서 컨테이너가 작동하는 환경이라면 어디서든 작동시킬수 있다. 
### 다른 기술과의 비교
#### 호스트형 서버 가상화
- 호스트 os 위에 가상화 소프트웨어를 설치한다. 가상화 소프트웨어상에서 게스트 os를 작동시키는 기술
- 컨테이너와는 달리 호스트 os 상에서 다른 게스트 os를 작동 시키므로 오버헤드가 매우 커진다.
- 오버헤드란 가상화를 수행하기 위해 필요한 cpu리소스, 디스크 용량, 메모리 사용량이 커지는 것 
#### 하이퍼 바이저형 서버 가상화
- 호스트 os가 없고 하드웨어를 직접 제어하기 때문에 리소스를 효율적으로 사용할 수 있다.
- 하지만 가상환경별로 다른 os가 작동하므로 가상 환경을 시작할때 오버헤드가 커진다.
- 컨테이너는 이식성을 높이고 다양한 환경에서 작동하는 것을 지향, 다른 가상화 기술은 다른 환경을 어떻게 효율적으로 시뮬레이션할지 지향
### 컨테이너 어플리케이션 개발의 3단계
- 빌드(build) :프로그램 본체, 라이브러리, 미들웨어나 os, 네트워크 설정등을 하나로 모아 도커 이미지를 만든다. 도커 이미지는 애플리케이션 실행에 필요한 파일들이 저장되어 있는 디렉토리
- 공유(ship) : 컨테이너 이ㅣ지를 Docker hub를통해 공유
- 실행 (run)
## Kubernetes
- 멀티 호ㅡ트로 구성된 클러스터 구성에서 가동시키려ㅕㄴ 호스트간 네트워크 연결이나 스토리지 관리, 컨테이너 스케줄링 기능이 필요한데 이를 통합관리할 수 있는 툴을 컨테이너 오케스트레이션 툴이라고 한다.
### 주요기능
- 여러 서버에서 컨테이너 관리
- 컨테이너 배포
- 컨테이너간 네트워크 관리
- 컨테이너 부하 분산
- 컨테이너 감시
- 컨테이너 업데이트
- 장애 발생 시 자동 복구
### 쿠버네티스 서버구성
- 마스터 : 쿠버네티스의 클러스터 전체를 관리하는 역할 여러대로 이루어진 클러스터 안의 노드의 리소스 사용 상황을 확인하고 컨테이너를 가동시킬 노드를 자동으로 선택한다. 
- 노드 : 컨테이너 애플리케이션이 작동하는 서버, 보통 노드를 여러대 준비하여 클러스터를 구성하고 대수가 늘어나ㅕㄴ 가용성이 향상된다. 클라우드에서는 가상 머신 인스턴스가 노드가 된다. 쿠버네팃는 컨테이너의 기본 런타임이 도커이다. 
#### 쿠버네티스의 컴포넌트
- 마스터 
  - api server : 쿠버네티스 리소스 저옵를 관리하기 위한 프론트엔드 rest api이다. 다른 컴포넌트로 부터 리소스 정보를 받아 데이터 스토어(etcd)에 저장하는 역할을 갖고 있다.
  - Scheduler : 스케줄러는 포드를 어느 노드에서 작동시킬지를 제어하기 위한 백엔드 컴포넌트이다. 노드에 할당되어 있지 않은 포드에 대해 쿠버네티스 클러스터의 상태를 확인하고 빈공간을 갖고 있는 노드를 찾아 포드를 실행시킨다.
  - Controller Manager : 컨트롤러 매니저는 쿠버네티스 클러스터의 상태를 감시하고 본래 되어야 할 상태를 유지하는 백엔드 컴포넌트
  - 데이터 스토어 (etcd) : 쿠버네티스 클러스터 구성을 유지하는 분산 kvs 데이터를 k-v형태로 관리한다. 어떤 포드를 어떻게 배치할지와 같은 정보가 있다.
- 노드
  - kubelet : 포드 정의 파일에 따라 컨테이너를 실행하거나 스토리지를 마운트 한다. 노드의 스테이터ㄹ스를 정기섲ㄱ으로 감시한다.
  - kube-proxy: 
## Orchestration
## referencs
- https://kubernetes.io/ko/docs/concepts/workloads/pods/pod-overview/
